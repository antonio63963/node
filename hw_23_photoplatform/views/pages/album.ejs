<% layout('../layouts/userPanel') -%>
<% script("/javascripts/userPanel/album.js") -%>

<div class="wrapper-album d-flex flex-column" style="width: 100%;" data-uid="<%=auth.uid %>" data-albumID="<%=auth.albumID %>" data->
  <header class="header-content lightDark">
    <h1 class="title-content"><%= auth.albumName %></h1>
    <hr>
    <div class="warap-header-options d-flex flex-colum">
      <div>
        <div style="width: 20%">
          <h4>Price:</h4>
          <div class="btn-group d-flex my-3" role="group" aria-label="Basic mixed styles example">
            <button type="button" class="btn btn-danger samePrice">same</button>
            <button type="button" class="btn btn-success">different</button>
          </div>
          
          <div class="mb-3 hidden priceInp">
            <label for="price" class="form-label">Price:</label>
            <input name="price" type="number" class="form-control" id="price" aria-describedby="price" value="0">
          </div>
        </div>
      </div>
      <div class="mx-3">
        <div class="d-flex align-items-center pointer copyLink">
          <i class="mx-3 fal fa-link"> </i> 
          <h4>Copy link:</h4>
        </div>
        <h5 id="copyLink" class="px-3">http://localhost:3000/albumLink/<%=auth.albumID %></h5>
      </div>
    </div>
  </header>
  <div class="photo-container d-flex justify-content-start" style="flex-wrap: wrap; height: 100%; padding: 20px;">
    <input type="file" id="replacePhoto" name="replacePhoto" accept=".jpg, .jpeg, .png, .webp" hidden>
    <% if(photos){%>
    <%photos.forEach(photo => { %>
      <figure class="figure growUp" style=" margin: 5px" data-album_id="<%= auth.albumID %>">
        <div class="iconImgGroup">
          <label data-photo_id="<%= photo._id %>">
            <i class="delIcon fal fa-trash-alt"></i>
            <!-- steer -->
            <div class="steer steer-delete">
              <span>Delete photo</span>
              <div class="steer-tail"></div>
            </div>
          </label>
          <label for="replacePhoto"  data-photo_id="<%= photo._id %>">
            <i class="replaceIcon fal fa-exchange"></i>
            <!-- steer -->
            <div class="steer steer-replace">
              <span>Replace photo</span>
              <div class="steer-tail"></div>
            </div>
          </label>
        </div>
        <img src="<%= photo.link %>" class="img-fluid rounded fitImg"  alt="">
        <!-- <figcaption class="figure-caption">A caption for the above image.</figcaption> -->
      </figure>
  
    <% }) %>
    <% } %>
  
    <form name="sendPhoto" style=" margin: 5px">
      <input type="text" name="uid" value="<%= auth.uid %>" hidden>
      <input type="text" name="albumName" value="<%= auth.albumName %>" hidden>
      <input type="text" name="albumID" value="<%= auth.albumID %>" hidden>
      <div style="color: #868e96; height: 300px; width: 300px;">
        <label for="photosInput" class="rounded addPhoto bg-darkd-flex">
          <div class="rounded pointer d-flex flex-column align-items-center justify-content-center"
            style="color: #868e96; height: 300px; width: 300px">
            <h3><i class="far fa-plus"></i></h3>
            <h1>Add photo</h1>
          </div>
          <input type="file" multiple id="photosInput" name="uploaded_file" accept=".jpg, .jpeg, .png, .webp" hidden>
        </label>
      </div>
  
      <button type="submit" class="btn btn-dark mt-3 sendFotos">Send to moderate</button>
    </form>
  </div>
</div>